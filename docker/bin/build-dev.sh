#!/bin/bash

TORRUST_IDX_FRON_USER_UID=${TORRUST_IDX_FRON_USER_UID:-1001}
TORRUST_IDX_FRON_RUN_AS_USER=${TORRUST_IDX_FRON_RUN_AS_USER:-appuser}
TORRUST_IDX_FRON_API_BASE_URL=${TORRUST_IDX_FRON_API_BASE_URL:-http://localhost:3001/v1}

echo "Building docker image ..."
echo "TORRUST_IDX_FRON_USER_UID: $TORRUST_IDX_FRON_USER_UID"
echo "TORRUST_IDX_FRON_RUN_AS_USER: $TORRUST_IDX_FRON_RUN_AS_USER"
echo "TORRUST_IDX_FRON_API_BASE_URL: $TORRUST_IDX_FRON_API_BASE_URL"

docker build \
    --target development \
    --build-arg UID="$TORRUST_IDX_FRON_USER_UID" \
    --build-arg RUN_AS_USER="$TORRUST_IDX_FRON_RUN_AS_USER" \
    --build-arg API_BASE_URL="$TORRUST_IDX_FRON_API_BASE_URL" \
    -t torrust-index-frontend .
